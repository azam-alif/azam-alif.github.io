<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SLURM Setup Guide</title>
  <link rel="icon" type="image/png" href="../favicon.png">
  <link rel="stylesheet" href="../style.css">
</head>
<body>
  <div id="particles-js"></div>

  <div class="container">
    <main class="main-content">
      <header>
        <h1>How To Set Up SLURM on Linux</h1>
        <nav>
          <a href="../index.html">Home</a>&nbsp;
          <a href="../topics.html">Blog Topics</a>&nbsp;
        </nav>
      </header>

      <main>
        <h2>What is SLURM?</h2>
        <p>
          <b>SLURM</b> (Simple Linux Utility for Resource Management) is a workload manager.
          It handles job scheduling, resource allocation, and node management in clusters.
        </p>

        <hr>

        <h2>1. Controller (Master) Node</h2>

        <h3>1.1 Install SLURM</h3>
        <div class="code-block-container">
          <button class="copy-code-button" onclick="copyCode(this)">Copy</button>
<pre><code>sudo pacman -S slurm-llnl</code></pre>
        </div>

        <h3>1.2 Create SLURM User</h3>
	<p>This slurm user will be used to maintain ownership of the files and directories used for SLURM.
        <div class="code-block-container">
          <button class="copy-code-button" onclick="copyCode(this)">Copy</button>
<pre><code>sudo useradd -r -s /usr/bin/nologin slurm</code></pre>
        </div>

        <h3>1.3 Configure slurm.conf</h3>
        <p>This file must be identical on all nodes.</p>
        <div class="code-block-container">
          <button class="copy-code-button" onclick="copyCode(this)">Copy</button>
<pre><code>ClusterName=cluster
SlurmctldHost=archlinux

ProctrackType=proctrack/linuxproc
ReturnToService=1
SlurmctldPort=6817
SlurmdPort=6818
SlurmUser=slurm
SlurmdSpoolDir=/var/spool/slurmd
StateSaveLocation=/var/spool/slurmctld

TaskPlugin=task/affinity,task/cgroup

SchedulerType=sched/backfill
SelectType=select/cons_tres

SlurmctldDebug=info
SlurmctldLogFile=/var/log/slurm/slurmctld.log
SlurmdDebug=info
SlurmdLogFile=/var/log/slurm/slurmd.log

NodeName=node1 NodeAddr=192.168.144.132 CPUs=2 RealMemory=3500 Sockets=1 CoresPerSocket=2 ThreadsPerCore=1 State=UNKNOWN
NodeName=node2 NodeAddr=192.168.144.175 CPUs=2 RealMemory=3500 Sockets=1 CoresPerSocket=2 ThreadsPerCore=1 State=UNKNOWN

PartitionName=debug Nodes=node[1-2] Default=YES MaxTime=INFINITE State=UP</code></pre>
        </div>
	<p>Save this file to /etc/slurm-llnl/slurm.conf

        <h3>1.4 Controller Directories</h3>
	<p>Now, to run SLURM smoothly, you need two directories.
	<ul>
		<li>/var/spool --> for saving live state + recovery </li>
		<li>/var/log --> for history + debugging </li>
	</ul>
        <div class="code-block-container">
          <button class="copy-code-button" onclick="copyCode(this)">Copy</button>
<pre><code>sudo mkdir -p /var/log/slurm
sudo mkdir -p /var/spool/slurmctld
sudo touch /var/log/slurm/slurmctld.log
sudo chown -R slurm:slurm /var/spool/slurmctld /var/log/slurm
sudo chmod 750 /var/log/slurm /var/spool/slurmctld
sudo chmod 640 /var/log/slurm/*.log</code></pre>
        </div>

        <h3>1.5 Start slurmctld</h3>
        <div class="code-block-container">
          <button class="copy-code-button" onclick="copyCode(this)">Copy</button>
<pre><code>sudo systemctl enable slurmctld
sudo systemctl start slurmctld</code></pre>
        </div>

        <hr>

        <h2>2. Compute Nodes</h2>

        <h3>2.1 Copy Configuration</h3>
        <div class="code-block-container">
          <button class="copy-code-button" onclick="copyCode(this)">Copy</button>
<pre><code>sudo cp /etc/slurm-llnl/slurm.conf /srv/nfsroot/etc/slurm-llnl/slurm.conf</code></pre>
        </div>

        <h3>2.2 Create compute node directories</h3>
        <div class="code-block-container">
          <button class="copy-code-button" onclick="copyCode(this)">Copy</button>
<pre><code>sudo mkdir -p /srv/nfsroot/var/spool/slurmd
sudo mkdir -p /srv/nfsroot/var/log/slurm
sudo touch /srv/nfsroot/var/log/slurm/slurmd.log
sudo chown -R slurm:slurm /srv/nfsroot/var/spool/slurmd /srv/nfsroot/var/log/slurm
sudo chmod 750 /srv/nfsroot/var/spool/slurmd /srv/nfsroot/var/log/slurm
sudo chmod 640 /srv/nfsroot/var/log/slurm/*.log</code></pre>
        </div>

        <h3>2.3 Start slurmd</h3>
        <div class="code-block-container">
          <button class="copy-code-button" onclick="copyCode(this)">Copy</button>
<pre><code>sudo systemctl enable slurmd
sudo systemctl start slurmd</code></pre>
        </div>

        <h3>2.4 Verify Cluster</h3>
        <div class="code-block-container">
          <button class="copy-code-button" onclick="copyCode(this)">Copy</button>
<pre><code>sudo scontrol update NodeName=node[1-2] State=RESUME
sinfo
scontrol show nodes</code></pre>
        </div>

        <footer>
          <p>Posted on: <b>December 13, 2025</b></p>
        </footer>
      </main>
    </main>
  </div>

  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <script src="../script.js"></script>
</body>
</html>
